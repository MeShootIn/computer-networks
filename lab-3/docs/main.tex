\documentclass[a4paper,12pt]{article}

\usepackage[hidelinks]{hyperref}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{shorttoc}
\usepackage{cmap}
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english, russian]{babel}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{float}

\definecolor{linkcolor}{HTML}{000000}
\definecolor{urlcolor}{HTML}{0085FF}
\hypersetup{pdfstartview=FitH,
  linkcolor=linkcolor,
  urlcolor=urlcolor,
colorlinks=true}

\newcommand{\plot}[3]{
  \begin{figure}[H]
    \begin{center}
      \includegraphics[scale=0.6]{#1}
      \caption{#2}
      \label{#3}
    \end{center}
  \end{figure}
}

\begin{document}
\include{title}
\newpage

\tableofcontents
\listoffigures
\listoftables
\newpage

\section{Постановка задачи}
\quad Требуется реализовать решение задачи византийских генералов.

\section{Теория}
\quad Имеется $ n $ генералов, из которых $ m $ предатели. Между каждым из $ n $
генералов установлен надёжный (исключающий подмену сообщения) канал связи.
Каждый из $ n - m $ верных генералов каждый раз посылает истинное и неизменяемое
сообщение, а каждый из $ m $ предателей посылает ложное и, возможно, изменяемое
сообщение. Верным генералам, в результате обмена сообщений, необходимо
определить предателей.

\quad Будем решать задачу в частном случае, когда число предателей не меняется, и $ n
> 3m $. Для этого случая существует алгоритм Лампорта, который состоит из
следующих шагов:

\begin{itemize}
  \item Каждый генерал посылает всем остальным сообщение, верные генералы -
    истинное, предатели - ложное.
  \item В результате у каждого генерала формируется массив из $ n $ элементов
    (полученных сообщений, включая и своё)
  \item Каждый генерал посылает всем остальным полученный на прошлом шаге
    массив.
  \item В конце каждый генерал имеет набор векторов, свой и полученный от других
    генералов. Для каждого $ i $ элемента каждого вектора находится то, которое
    чаще других встречается. Если оно встречается как минимум $ n - m $ раз, то
    оно считается истинным и помещается в результирующий вектор, иначе в
    результирующий вектор помещается нуль.
\end{itemize}

\quad Доказано, что генералы всегда придут к согласию при условии $ 3m < n $.

\section{Реализация}
\quad Из языка Python 3.12.2 были использованы следующие модули:
\begin{itemize}
  \item ``numpy'' --- генерация множества чисел;
  \item ``matplotlib.pyplot'' --- построение и отображение графиков;
  \item ``enum'' --- создание типа с ограниченным множеством значений.
\end{itemize}

\section{Результаты}
\quad Рассмотрим пример работы алгоритма на модельном случае с $n = 7, \; m =
2$. В качестве индексов сопоставим генералам числа от 0 до 6 включительно.
Последний генерал будет византийским, остальные --- честными.  Византийский
генерал будет на первом этапе отправлять значения вида $v_{i}$, где $i$ --- индекс
генерала, которому адресовано сообщение, а на втором шаге --- $v_{i}\_v_{j}$, где
$i$ --- индекс генерала, которому адресовано сообщение, $j$ --- индекс генерала,
от которого (как утверждает византийский генерал) было получено это значение на
первом этапе.

\quad Итоговые вектора (прочерк на месте генералов-предателей):

\begin{equation}
  \begin{gathered}
    0 : [0, 1, 2, 3, 4, 5, 6, -, -], \\
    1 : [0, 1, 2, 3, 4, 5, 6, -, -],  \\
    2 : [0, 1, 2, 3, 4, 5, 6, -, -], \\
    3 : [0, 1, 2, 3, 4, 5, 6, -, -], \\
    4 : [0, 1, 2, 3, 4, 5, 6, -, -], \\
    5 : [0, 1, 2, 3, 4, 5, 6, -, -], \\
    6 : [0, 1, 2, 3, 4, 5, 6, -, -], \\
  \end{gathered}
\end{equation}

\quad Генералы пришли к согласию.
В качестве альтернативы рассмотрим модельный случай с $n = 4, \; m = 3$.

\begin{equation}
  \begin{gathered}
    0 : [v_{0, 0}, v_{0}\_v_{3}, v_{0}\_v_{3}, v_{0}\_v_{1}], \\
    1 : [v_{1, 0}, v_{1}\_v_{3}, v_{1}\_v_{3}, v_{1}\_v_{2}],  \\
    2 : [v_{2, 0}, v_{2}, v_{2}\_v_{3}, v_{2}], \\
    3 : [v_{3, 0}, v_{3}\_v_{2}, v_{3}, v_{3}\_v_{2}] \\
  \end{gathered}
\end{equation}

Условие $ 3m < n $ не выполнилось, генералы не пришли к согласию. Построим также
таблицу успешности результатов для $ n = \overline{2, 7} $, $ m = \overline{0, n
- 1} $

\begin{table}[H]
  \caption{результаты решения задачи при разных $n, m$}
  \begin{tabular}{| c | c | c | c | c | c | c | c |}
    \hline
    n | m & 0 & 1 & 2 & 3 & 4 & 5 & 6 \\
    \hline
    2 & + & - & & & & &  \\
    \hline
    3 & + & + & - & & & & \\
    \hline
    4 & + & + & - & - & & & \\
    \hline
    5 & + & + & - & - & - & & \\
    \hline
    6 & + & + & + & - & - & - & \\
    \hline
    7 & + & + & + & - & - & - & - \\
    \hline
  \end{tabular}
  \centering
\end{table}

\section{Выводы}
\quad В результате работы реализован алгоритм Лампорта для решения частного
случая задачи Византийских генералов. Показана работоспособность алгоритма.
Кроме того, получен результат, говорящий о том, что условие $ 3m < n $ является
досаточным, но не необходимым для успешного решения.

\section{Литература}
\begin{itemize}
  \item \href{https://elib.spbstu.ru/dl/2/s20-76.pdf/info}{Баженов А.Н.
    <<Интервальный анализ. Основы теории и учебные примеры: учебное пособие>>};
  \item \href{https://elib.spbstu.ru/dl/5/tr/2021/tr21-169.pdf/info}{Баженов
      А.Н. <<Естественнонаучные и технические применения интервального анализа:
    учебное пособие>>};
  \item \href{https://github.com/AlexanderBazhenov/ComputerNetworks}{Баженов
    А.Н. Репозиторий ``ComputerNetworks'' на GitHub};
\end{itemize}

\section{Приложения}
\quad Исходники лабораторной работы выложены на
\href{https://github.com/MeShootIn/computer-networks/tree/lab-3}{GitHub}.

\end{document}
